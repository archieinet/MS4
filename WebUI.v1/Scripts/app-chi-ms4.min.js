var app=angular.module("appMS4",["ui.router","ui.bootstrap"]);(function(){"use strict";var n=function(n,t){t.otherwise("/home");n.state("home",{url:"/home",templateUrl:"app/views/main.html",data:{reqLogin:!1}}).state("dashboard",{url:"/dashboard",template:'<dashboard-component auth="$resolve.xKey"><\/dashboard-component>',data:{reqLogin:!0},resolve:{xKey:["$uibModal",function(n){return n.open({animation:!0,component:"loginComponent",size:"md"}).result.then(function(n){return sessionStorage.profile!==undefined&&sessionStorage.removeItem("profile"),sessionStorage.setItem("profile",JSON.stringify(n)),n})}]}})},t=function(n,t,i){n.$on("$stateChangeStart",function(r,u,f){var e=u.data.reqLogin;sessionStorage.profile!==undefined&&(n.Profile=JSON.parse(sessionStorage.profile));e&&n.Profile===undefined&&i().then(function(i){return n.Profile=i,t.go(u,f)}).catch(function(){return t.go("home")})});n.$on("$stateChangeSuccess",function(){})};app.config(["$stateProvider","$urlRouterProvider",n]).run(["$rootScope","$state","authService",t]).constant("appConst",{API:"http://localhost:65438/"})})(),function(){"use strict";var n=function(n){function t(n){return sessionStorage.profile!==undefined&&sessionStorage.removeItem("profile"),sessionStorage.setItem("profile",JSON.stringify(n)),n}return function(){return n.open({animation:!0,component:"loginComponent",size:"md"}).result.then(t)}};n.$inject=["$uibModal"];app.service("authService",n)}(),function(){"use strict";app.directive("fileModel",function(){return{scope:{selectedFile:"="},link:function(n,t){t.on("change",function(t){for(var r=t.target.files,i=0;i<r.length;i++)console.info("file selected: "+r[i].name),n.$emit("selectedFile",{file:r[i]})})}}})}(),function(){"use strict";var n=function(n,t){var i=this;i.$onInit=function(){i.name="archie"};i.ok=function(){n.get(t.API+"/api/authen/",{params:{UserName:i.usr,Email:i.usr,Password:i.pwd},Developer:"AP",Version:"1.0.0","Content-Type":"application/json"}).then(function(n){i.close({$value:{name:i.usr,xkey:n.data}})}).catch(function(n){return toastr.error(n.statusText,"ERROR"),n.statusText})};i.cancel=function(){i.dismiss({$value:"cancel"})};i.testFunc=function(){return 10}};n.$inject=["$http","appConst"];app.component("loginComponent",{templateUrl:"app/views/login.html",controller:n,controllerAs:"login",bindings:{resolve:"<",close:"&",dismiss:"&"}})}(),function(){"use strict";var n=function(n,t,i){var r=this;t.files=[];r.inProc=!1;t.$on("selectedFile",function(n,i){t.$apply(function(){t.files.push(i.file)})});r.removeAttach=function(n){t.files.splice(n,1)};r.uploadFiles=function(){if(r.inProc=!0,t.files.length===0)return alert("No files to be upload"),!1;i(function(){r.inProc=!1},2e3)};r.removeAll=function(){if(t.files.length===0)return!1;t.files=[]};r.profile=JSON.stringify(n.Profile)};n.$inject=["$rootScope","$scope","$timeout"];app.component("dashboardComponent",{templateUrl:"app/views/dashboard.html",controller:n,controllerAs:"dash"})}(),function(){"use strict";var n=function(n,t){var i=this;i.files=[];i.$onInit=function(){t(function(){console.info(".....timeout...");n.get("Temp_Data/ds1.json").then(function(n){return i.files=n.data,!0})},5e3)}};n.$inject=["$http","$timeout"];app.component("displayFilesComponent",{templateUrl:"app/views/display-files.html",controller:n,controllerAs:"df",transclude:!0})}();