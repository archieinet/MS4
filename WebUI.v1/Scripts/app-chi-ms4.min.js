var app=angular.module("appMS4",["ui.router","ui.bootstrap"]);(function(){"use strict";var n=function(n,t){t.otherwise("/home");n.state("home",{url:"/home",templateUrl:"app/views/main.html",data:{reqLogin:!1}}).state("dashboard",{url:"/dashboard",template:"<dashboard-component><\/dashboard-component>",data:{reqLogin:!0}}).state("logout",{url:"/home",data:{reqLogin:!1}})},t=function(n,t,i){var r=$("#dashboardBtn");n.$on("$stateChangeStart",function(r,u,f){var e=u.data.reqLogin;sessionStorage.profile!==undefined&&(n.Profile=JSON.parse(sessionStorage.profile));e&&n.Profile===undefined&&(r.preventDefault(),i().then(function(i){return n.Profile=i,t.go(u,f)}).catch(function(){return t.go("home")}))});n.$on("$stateChangeSuccess",function(t,i){i.name==="logout"&&(!sessionStorage.getItem("profile")||(sessionStorage.removeItem("profile"),delete n.Profile,r.show()));n.Profile!==undefined&&r[0].style.display!=="none"&&r.hide(1e3)})};app.config(["$stateProvider","$urlRouterProvider",n]).run(["$rootScope","$state","authService",t]).constant("appConst",{API:"http://localhost:65438/"})})(),function(){"use strict";var n=function(n){function t(n){return sessionStorage.profile!==undefined&&sessionStorage.removeItem("profile"),sessionStorage.setItem("profile",JSON.stringify(n)),n}return function(){return n.open({animation:!0,component:"loginComponent",size:"md"}).result.then(t)}};n.$inject=["$uibModal"];app.service("authService",n)}(),function(){"use strict";app.directive("fileModel",function(){return{scope:{selectedFile:"="},link:function(n,t){t.on("change",function(t){for(var r=t.target.files,i=0;i<r.length;i++)console.info("file selected: "+r[i].name),n.$emit("selectedFile",{file:r[i]})})}}})}(),function(){"use strict";var n=function(n,t,i){var r=this;r.inProc=!1;r.fail=!1;r.$onInit=function(){r.name="archie"};r.ok=function(){r.inProc=!0;i(function(){n.get(t.API+"/api/authen/",{params:{UserName:r.usr,Email:r.usr,Password:r.pwd},Developer:"AP",Version:"1.0.0","Content-Type":"application/json"}).then(function(n){r.close({$value:{name:r.usr,xkey:n.data}})}).catch(function(n){return r.fail=!0,n.statusText}).finally(function(){r.inProc=!1})},2e3)};r.cancel=function(){r.dismiss({$value:"cancel"})};r.testFunc=function(){return 10}};n.$inject=["$http","appConst","$timeout"];app.component("loginComponent",{templateUrl:"app/views/login.html",controller:n,controllerAs:"login",bindings:{resolve:"<",close:"&",dismiss:"&"}})}(),function(){"use strict";var n=function(n,t,i,r,u,f){var e=this;t.files=[];e.inProc=!1;t.$on("selectedFile",function(n,i){t.$apply(function(){t.files.push(i.file)})});e.removeAttach=function(n){t.files.splice(n,1)};e.uploadFiles=function(){if(e.inProc=!0,t.files.length===0)return alert("No files to be upload"),!1;r({method:"POST",url:f.API+"api/UploadFile",headers:{"Content-type":undefined},transformRequest:function(n){var i=new FormData,t;for(i.append("model",angular.toJson(n.model)),t=0;t<n.files.length;t++)i.append("file"+t,n.files[t]);return i},data:{model:{uploadBy:sessionStorage.profile===undefined?"Anonymous":JSON.parse(sessionStorage.profile).name},files:t.files}});i(function(){e.inProc=!1;alert("still in progress...")},2e3)};e.removeAll=function(){if(t.files.length===0)return!1;t.files=[]};e.profile=JSON.stringify(n.Profile)};n.$inject=["$rootScope","$scope","$timeout","$http","$q","appConst"];app.component("dashboardComponent",{templateUrl:"app/views/dashboard.html",controller:n,controllerAs:"dash"})}(),function(){"use strict";var n=function(n,t){var i=this;i.files=[];i.$onInit=function(){t(function(){console.info(".....timeout...");n.get("Temp_Data/ds1.json").then(function(n){return i.files=n.data,!0})},5e3)}};n.$inject=["$http","$timeout"];app.component("displayFilesComponent",{templateUrl:"app/views/display-files.html",controller:n,controllerAs:"df",transclude:!0})}();